{% extends "layout.html" %}

{% block title %}
    Search User
{% endblock %}

{% block main %}

<input class="form-control" autocomplete="off" autofocus placeholder="Search User" type="text" class="mb-3">
<div class="table-responsive-md">
    <table class="table table-striped table-hover table-sm">
        <thead class="thead-light">
            <tr>
                <th scope="col">Username</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
    </table>
</div>


<script crossorigin="anonymous" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    let input = document.querySelector('input');
    input.addEventListener('keyup', function() {
        $.get('/search?q=' + input.value, function(result) {
            let htmltable = "";
            for (let i = 0; i < result.length; i++) {
                let username = result[i].username;
                htmltable += "<tr><td>" + username + "</td></tr>";
            }
            document.querySelector('tbody').innerHTML = htmltable;
        });
    });
</script>

{% endblock %}